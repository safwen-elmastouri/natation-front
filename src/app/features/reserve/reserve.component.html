<form (ngSubmit)="onSubmit()" #form="ngForm" class="form">
  <h2>Réservation du coach – Piscine</h2>
  <div class="field">
    <label for="date">Date</label>
    <input id="date" type="date" name="date" [(ngModel)]="reservation.date" required />
  </div>
  <div class="row">
    <div class="col-md-12 d-flex">
      <div class="field me-3 flex-grow-1">
        <label for="startTime">Heure Début</label>
        <input id="startTime" type="time" name="startTime" [(ngModel)]="reservation.startTime" required />
      </div>
      <div class="field flex-grow-1">
        <label for="endTime">Heure fin</label>
        <input id="endTime" type="time" name="endTime" [(ngModel)]="reservation.endTime" required />
      </div>
    </div>
  </div>
  <div class="field">
    <label for="equipe">Équipe</label>
    <input id="equipe" type="text" name="equipe" [(ngModel)]="reservation.equipe" required />
  </div>

  <div class="field">
    <label for="piscine">Piscine</label>
    <select id="piscine" name="piscine" [(ngModel)]="reservation.piscine" required>
      <option value="">-- Choisissez une piscine --</option>
      <option *ngFor="let p of piscines" [value]="p">{{ p }}</option>
    </select>
  </div>

  <div class="field" *ngIf="reservation.piscine">
    <label for="couloir">Couloir</label>
    <select id="couloir" name="couloir" [(ngModel)]="reservation.couloir" required>
      <option [ngValue]="null">-- Choisissez un couloir --</option>
      <option *ngFor="let c of getCouloirsForPiscine(reservation.piscine)" [ngValue]="c.name"
        [disabled]="!c.disponible">
        {{ c.name }} {{ !c.disponible ? '(Réservée)' : '' }}
      </option>
    </select>
  </div>
  <button type="submit">Réserver</button>
</form>
<!-- Modal de confirmation -->
<div class="modal" *ngIf="submitted && confirmationReservation" (click)="closeModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <span class="close" (click)="closeModal()">&times;</span>
    <h3>Réservation confirmée</h3>
    <ul>
      <li><strong>Date :</strong> {{ confirmationReservation.date }}</li>
      <li><strong>Heure :</strong> {{ confirmationReservation.startTime }} – {{ confirmationReservation.endTime }}</li>
      <li><strong>Équipe :</strong> {{ confirmationReservation.equipe }}</li>
      <li><strong>Piscine :</strong> {{ confirmationReservation.piscine }}</li>
      <li><strong>Couloir :</strong> {{ confirmationReservation.couloir }}</li>
    </ul>
    <button (click)="closeModal()">Fermer</button>
  </div>
</div>